[
  {
    "objectID": "SHARK.html",
    "href": "SHARK.html",
    "title": "Shark_tab",
    "section": "",
    "text": "To be continued"
  },
  {
    "objectID": "resume.html",
    "href": "resume.html",
    "title": "Javier Patrón",
    "section": "",
    "text": "EDUCATION\n\nMaster of Environmental Data Science\n\n(Expected June 2023)\nBren School of Environmental Science & Management – University of California, Santa Barbara (UCSB) Highlighted Coursework: Geospatial Analysis and Remote Sensing, Machine Learning in Environmental Science, Data Visualization and Communication, Modeling Environmental Systems\n\n\n\nBachelor of Mechanical and Electrical Engineering\n\n3.6 GPA (December 2017)\nUniversidad Iberoamericana, Mexico City Study Abroad: UNSW Sydney, Australia Highlighted Coursework: The Marine Environment, Global Finance, Sustainable and Renewable Energy, Process Technology and Automation\n\n\n\n\nSKILLS & RECOGNITIONS\n\nProgramming, Coding, & Data Analysis:\nR, Python, SQL, Git (+ GitHub); Familiar with C++, HTML.\n\n\nProgramming Environments:\nRStudio, Spyder, Visual Studio Code, Jupyter Notebooks.\n\n\nTechnical Coding Skills:\nGeospatial Analysis and Remote Sensing, Data Visualization, Machine Learning.\n\n\nGE Company Award:\nNominated as “Best Digital Worker” who embraced the digital deployment in the region as an overachiever and a role model.\n\n\n\nPROFESSIONAL DEVELOPMENT EXPERIENCE\n\nCollaboration with Center of Biodiversity and Conservation\n\nBCS, Mexico (6/22 – Present)\n• Bridging data science and management: An open-source integrated workflow for MPAs.\n• Data-driven project mechanism to extract current MPA biodiversity health data from recreational divers\n\n\n\nYachting\n\nPacific Ocean (7/21 – 7/22)\n• Sailed across the Pacific Ocean as Pro-Sailor in a 52ft racing boat\n• Roles: Team Manager, Tactician, and Watch captain\n• Competed in 3 international regattas (CaboRace, SoCal300, Transpac Regatta)\n\n\n\nCoral Farming Voluntary\n\nCorals 4 Conservation. Mamanuca Islands, Fiji (9/21 – 11/21)\n• Replanting over 500 corals.\n• Transects data practices.\n• Work along with the marine biologists in the coral nursery tables maintenance and mangrove reforestation\n\n\n\n\nWORKING EXPERIENCE\n\nCustomer Support Lead – Current by GE\n\nMexico City, Mexico (6/20 – 7/21)\n• Global commissioning and tech-support team leader for GE Current´s smart controls software\n• Manager of the global tech-support team (18 pax). Build and create all procedures needed for the new business strategy and increase their IoT and AI solutions capability.\n• $5.8 USD in revenue recognition o Tech leader for GE Current´s largest gateway programming implementation for energy efficiency and IoT, AI software in over 1250 stores across Mexico.\n\n\n\nDigital Project Manager – Current Powered by GE\n\nMexico City, Mexico (1/18 – 6/20)\n• Lead as a consultant and project manager for all Latin America Turn-Key digital projects:\n• Sole LatAm digital resource for Daintree software implementation. Includes: Internal and external training, solutioning/ troubleshooting, and support for all current and completed projects.\n• Central POC. Lead coordination among third-party contractors.\n• Managing and reporting project status, budget and risks to GE leadership (LatAm, USA, AUS).\n\n\n\nProjects Intern – General Electric\n\nMexico City, Mexico (5/17 – 6/20)\n• Project Management Intern / Order to Remittance team\n• Hand out weekly reports with the installation contractor, and field quality checks for the installation process.\n• GE Lean Challenge competitor leveraging savings based on storage volume and shipment times\n\n\n\n\nMASTER´S CAPSTONE DATA SCIENCE PROJECT\n\nNAME OF THE PROJECT (1/23 – Present)\n\nRole: XXX | Client: XXX\n• XXX\n• XXX\n\n\n\n\nADDITIONAL\n\nLanguages\nFluent in English and Spanish\n\n\nCertifications & Training\nPADI Rescue Diver\nMexican Yacht Skipper License\nEmergency First Response & CPR Certifications\n\n\nCitizenship\nMexican & Spanish\n\n\nOther\nAuthorized to work for any US employer (no sponsorship required)"
  },
  {
    "objectID": "posts/stats_final/index.html#introduction",
    "href": "posts/stats_final/index.html#introduction",
    "title": "An Statistical Mangrove Analysis Post",
    "section": "Introduction",
    "text": "Introduction\nBlue carbon is attracting massive attention from governments, investors, and companies needing carbon accounting practices. Mangrove forests can sequester almost ten times more than boreal, temperate, or tropical forests, thanks to the mangrove biological characteristics. That is one of the main reasons they received the nickname of “The Superheroes of Climate Change.”\nMoreover, carbon stocks are the total amount of organic carbon stored within a system and are comprised of carbon pools, which fall into different bins: living aboveground living (live plants, including epiphytes); dead aboveground biomass (e.g., fallen branches); living belowground biomass (e.g., roots); and belowground carbon (sediment organic matter).\nWith that in mind, it is critical to understand the main factors to calculate the total mangrove carbon stocks’ in restoration practices. Additionally, to analyze and calculate an appropriate amount of tree samples and plot sizes to estimate the amount of carbon storage in the area.\n\n\n\nThe more you know: Mangroves (2020)\n\n\n\nIs there existing evidence for this question? If so, why is it inconclusive?\nBlue carbon accounting is a new strategy with few practical examples and evidence worldwide. Some methodologies align with the Verra non-profit organization VCS (Verified Carbon Standard) that helps us describe and outline the correct procedures to quantify the net greenhouse gas emission reductions and removals resulting from project activities implemented to restore tidal wetlands. For this case, the provided data uses equations and formulas designed on the VCS0032 and VCS0033 methodologies, which are aligned with the VCS."
  },
  {
    "objectID": "posts/stats_final/index.html#data",
    "href": "posts/stats_final/index.html#data",
    "title": "An Statistical Mangrove Analysis Post",
    "section": "Data",
    "text": "Data\nThe data we will analyze to answer our questions are actual field measurements from mangrove trees over four replantation sites (2010, 2016, 2017, 2020). This data was provided directly to me by Silvestrum Climate Associates ®. This data is confidential, and there is limited access to the site.\n\n\n\n\n\n\n\nLimitations, spatial and temporal features.\nThe dataset contains a record for each tree height and canopy. With those measurements, Silvestrum has calculated the total tree carbon in (kg) and the total tree carbon per hectare in (Mg/ha). In this analysis, we will assume that the correct protocols and equations were followed for this purpose, and this analysis is dependent from those results.\nRegarding the dataset, the above and below ground carbon storage was assessed using a nested sub-sampling protocol along the 25m2, 77m2, and 154m2 transect following the Kauffman and Donato procedure. The equations for above and below ground biomass are defined by Comley and McGuiness.\nFurthermore, seeking for data limitations this mathematical calculations made by Silvestrum is a significant one, as this observations do not have the actual carbon samples to be analyzed. Another limitation is the possible man errors from the field sampling and the natural growth and variability from the mangroves.\nTo get you familiarized, the table below shows the first 5 rows of the data we will be studying. It has a total of 10,826 rows and 11 columns.\n\n\n\n\nTable 1. Full Mangrove Data Set (head)\n \n  \n    plantation_year \n    plot \n    height_cm \n    canopy_width_1_cm \n    canopy_width_2_cm \n    crown_area_m2 \n    cd_chatting_m \n    chatting_agb_kg \n    chatting_agb_mg_ha \n    comley_mc_guinness_planted_bgb_kg \n    comley_mc_guinness_planted_bgb_mg_ha \n    total_tree_kg \n    total_tree_mg_ha \n    chatting_agc_kg_c \n    chatting_agc_mg_c_ha \n    comley_mc_guinness_planted_bgc_kg_c \n    comley_mc_guinness_planted_bgc_mg_c_ha \n    total_tree_kg_c \n    total_tree_mg_c_ha \n    plot_size_m2 \n  \n \n\n  \n    2017 \n    8 \n    112 \n    59 \n    57 \n    0.264 \n    0.58 \n    0.494 \n    0.032 \n    0.456 \n    0.030 \n    0.950 \n    0.062 \n    0.237 \n    0.015 \n    0.178 \n    0.012 \n    0.415 \n    0.027 \n    153.938 \n  \n  \n    2017 \n    2_new \n    280 \n    90 \n    101 \n    0.716 \n    0.96 \n    1.436 \n    0.571 \n    1.326 \n    0.527 \n    2.762 \n    1.099 \n    0.689 \n    0.274 \n    0.517 \n    0.206 \n    1.206 \n    0.480 \n    25.133 \n  \n  \n    2017 \n    2_new \n    275 \n    114 \n    119 \n    1.066 \n    1.17 \n    2.198 \n    0.874 \n    2.028 \n    0.807 \n    4.226 \n    1.681 \n    1.055 \n    0.420 \n    0.791 \n    0.315 \n    1.846 \n    0.734 \n    25.133 \n  \n  \n    2017 \n    2_new \n    274 \n    95 \n    102 \n    0.762 \n    0.99 \n    1.534 \n    0.611 \n    1.416 \n    0.564 \n    2.951 \n    1.174 \n    0.737 \n    0.293 \n    0.552 \n    0.220 \n    1.289 \n    0.513 \n    25.133 \n  \n  \n    2017 \n    2_new \n    264 \n    133 \n    104 \n    1.103 \n    1.19 \n    2.279 \n    0.907 \n    2.104 \n    0.837 \n    4.383 \n    1.744 \n    1.094 \n    0.435 \n    0.820 \n    0.326 \n    1.914 \n    0.762 \n    25.133 \n  \n  \n    2017 \n    2_new \n    264 \n    133 \n    104 \n    1.103 \n    1.19 \n    2.279 \n    0.907 \n    2.104 \n    0.837 \n    4.383 \n    1.744 \n    1.094 \n    0.435 \n    0.820 \n    0.326 \n    1.914 \n    0.762 \n    25.133 \n  \n\n\n\n\n\n\n\n\n\nTable 2. Total mangrove Dataset summary\n \n  \n    plantation_year \n    Plot Count \n    Sample Count \n    Total Carbon (mg/ha) \n    Total Carbon Variance (mg/ha) \n  \n \n\n  \n    2010 \n    7 \n    746 \n    45.725 \n    0.1072349 \n  \n  \n    2017 \n    27 \n    4126 \n    242.993 \n    0.1302739 \n  \n  \n    2019 \n    8 \n    998 \n    22.994 \n    0.0185163 \n  \n  \n    2020 \n    46 \n    4956 \n    87.824 \n    0.0159968 \n  \n\n\n\n\n\nAs we can see in the table above, the 2017 plantation year has an exciting number of samples, different sample plot sizes, and high variation of total carbon in Mg per hectare. We will focus on this year to answer our questions.\nThe table #3 contains only information from the 2017 plantation year. We will use this filter to analyse the different questions, and interpret our results.\n\n\nShow code\nmangrove_2017 <- mangrove_df |> \n  filter(plantation_year == 2017) |> \n  select(height_cm,plot, plot_size_m2, cd_chatting_m,total_tree_kg_c,total_tree_mg_c_ha)\nmangrove_2017 <- mangrove_2017[!(mangrove_2017$total_tree_mg_c_ha== 1.224),]\n\n#Statistical Table with the selected variables for question #1\nmangrove_plots_2017 <- mangrove_2017 |> \n  group_by(plot_size_m2) |> \n  summarise(tot_samples = n(),\n            tot_plot_count = length(unique(plot)),\n            mean_tree_c_ha = mean(total_tree_mg_c_ha),\n            sd_tree_c_ha = sd(total_tree_mg_c_ha)) |> \n  mutate(plot_size_m2 = c(\"25m2\", \"77m2\", \"154m2\"))\n\nmangrove_plots_2017 %>% \n  kbl(align=rep('c', 5),\n      caption =\"Table 3. Plot summary of the 2017 plantation year\",\n      position = \"left\") %>%\n  kable_paper(\"hover\", full_width = F)\n\n\n\n\nTable 3. Plot summary of the 2017 plantation year\n \n  \n    plot_size_m2 \n    tot_samples \n    tot_plot_count \n    mean_tree_c_ha \n    sd_tree_c_ha \n  \n \n\n  \n    25m2 \n    323 \n    4 \n    0.3708173 \n    0.3035103 \n  \n  \n    77m2 \n    336 \n    5 \n    0.0624196 \n    0.0651300 \n  \n  \n    154m2 \n    3466 \n    18 \n    0.0291466 \n    0.0297558 \n  \n\n\n\n\n\nShow code\n#Statistical table of each unique plot to analyse variability in the question #2\nplots_2017 <- mangrove_2017 |> \n  group_by(plot, plot_size_m2) |> \n  summarise(sample_count = n(),\n            mean_tree_c = mean(total_tree_kg_c),\n            mean_carbon_mg_ha = mean(total_tree_mg_c_ha),\n            sd_tree_c = sd(total_tree_kg_c),\n            sd_tree_c_ha = sd(total_tree_mg_c_ha))\n\n\nNow let us take a closer look at the effect of sample plot size and the total tree carbon (Mg/ha).\n\n\nShow code\n#Boxplot\nboxplot_2017 <- mangrove_2017 |>\n  ggplot(aes(x=plot_size_m2, y = total_tree_mg_c_ha,color = plot_size_m2)) +\n  geom_boxplot() +\n  labs(title = \"Tree Carbon vs Plot Type\",\n       subititle = \"Plantation Year - 2017\",\n       x = \"Plot Size (m2)\",\n       y = \"Total Tree Carbon (Mg/ha)\") +\n  scale_color_brewer(palette = \"Dark2\") \n\nggplotly(boxplot_2017)"
  },
  {
    "objectID": "posts/stats_final/index.html#question-1",
    "href": "posts/stats_final/index.html#question-1",
    "title": "An Statistical Mangrove Analysis Post",
    "section": "Question 1",
    "text": "Question 1\nThe graph above shows a visual difference in carbon means between the 25m2 sample plot and the other two sample plots. So let us analyze the relationship between the 77m2 and the 154m2, with a hypothesis test and see if the means in the total carbon per tree (Mg/ha) are different.\nAnalysis: Hypothesis Testing between 77m2 vs 154m2\nThe Null Hypothesis - The Total Carbon per Tree (Mg/ha) mean in the Sample Size of 77m2 is no different from the 154m2.\n\\[H_0: \\mu_{77m2} - \\mu_{154m2} = 0\\]\nAlternative Hypothesis- The Total Carbon per Tree (Mg/ha) in the sample size of 77m2 is different from the one the 154m2.\n\\[H_0: \\mu_{77m2} - \\mu_{154m2} \\neq 0\\]\nCalculate the Point Estimate and the Standard Error\n\\[SE = \\sqrt{\\frac{s_1^2}{n_1} + \\frac{s^2_2}{n_2}}\\]\n\n\nShow code\n#Calculate Point Estimate\npoint_est_2 = (mangrove_plots_2017$mean_tree_c_ha[2] - mangrove_plots_2017$mean_tree_c_ha[3])\n\n#Define the Standard Error\nn_77m = mangrove_plots_2017$tot_samples[2]\ns_77m =  mangrove_plots_2017$sd_tree_c_ha[2]\nn_154m = mangrove_plots_2017$tot_samples[3]\ns_154m =  mangrove_plots_2017$sd_tree_c_ha[3]\n\nprint(paste(\"Point Estimate:\", round(point_est_2,5)))\n\n\n[1] \"Point Estimate: 0.03327\"\n\n\nShow code\nSE_2 = as.numeric(sqrt(s_77m^2/n_77m + s_154m^2/n_154m))\nprint(paste(\"Standard Error:\", round(SE_2,5)))\n\n\n[1] \"Standard Error: 0.00359\"\n\n\nCalculate the Z-Score \\[z_{score}=\\frac{\\text { point estimate }-\\text { null value }}{S E}\\]\n\n\nShow code\nz_score_2 <- (point_est_2 - 0) / SE_2\nz_score_2\n\n\n[1] 9.271106\n\n\nThe Z-Score will tell us that the the observed difference between a sample plot of 77m2 and 154m2 is 9.3 standard deviations above our null hypothesis of “zero difference” of our dependent variable in Tree Carbon (Mg/ha).\nCalculate the p-value and run a t - test\n\n\nShow code\noption2_ttest <- t.test(mangrove_2017$total_tree_mg_c_ha[mangrove_2017$plot_size_m2 == 76.969], mangrove_2017$total_tree_mg_c_ha[mangrove_2017$plot_size_m2 == 153.938])\noption2_ttest\n\n\n\n    Welch Two Sample t-test\n\ndata:  mangrove_2017$total_tree_mg_c_ha[mangrove_2017$plot_size_m2 == 76.969] and mangrove_2017$total_tree_mg_c_ha[mangrove_2017$plot_size_m2 == 153.938]\nt = 9.2711, df = 348.68, p-value < 2.2e-16\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n 0.02621446 0.04033169\nsample estimates:\n mean of x  mean of y \n0.06241964 0.02914657 \n\n\n\nResults:\nWith this results we can reject the null as the p-value is telling us there it exists a statistical significant difference between the means of carbon storage between the sample plot size of 77m2 to the sample size of 154m2.\nWe are 95% confident that the true value of the difference in tree carbon across the two plot sizes lies between 0.0262 - 0.0403 Mg per hectare.\nThis graph summarizes all the important take away.\n\n\nShow code\ncrit_val_2 = qnorm(0.025, lower.tail = F)\nci_lower_2 = round(point_est_2 - crit_val_2*SE_2, 3)\nci_upper_2 = round(point_est_2 + crit_val_2*SE_2, 2)\n\nmangrove_2017 |>\n  filter(plot_size_m2 %in% c(76.969, 153.938)) |> \n  ggplot(aes(x=plot_size_m2, y = total_tree_mg_c_ha,color = plot_size_m2)) +\n  geom_point(alpha = 0.5) +\n  stat_summary(fun= \"mean\", aes(shape= \"mean\"),color = \"darkblue\", geom = \"pointrange\",size = 1.5) +\n  labs(title = \"Tree mg C vs Plot Type\",\n       x = \"Plot Size\",\n       y = \"Total Tree Carbon (Mg/ha)\") +\n  scale_color_brewer(palette = \"Dark2\") +\n  geom_hline(aes(yintercept = 0.026, linetype = \"Lower CI\"), color = \"gray50\", size = .5) +\n  geom_hline(aes(yintercept = 0.04, linetype = \"Upper CI\"), color = \"gray10\", size = .5) +\n  scale_shape_manual(\"\", values= c(\"mean\" = \"+\")) +\n  scale_linetype_manual(name = \"Confidence Intervals\", values = c(2, 2), \n                        guide = guide_legend(override.aes = list(color = c(\"gray50\", \"gray10\"))))\n\n\n\n\n\n\n\nImportant take away from Question 1\nAs we can see in the graph, both means are close to each other, but they are statistically significantly different. With this data analysis and results, we can help the actual client better understand their plot sampling sizes, concluding that smaller plot sizes are getting a larger carbon estimate."
  },
  {
    "objectID": "posts/stats_final/index.html#question-2",
    "href": "posts/stats_final/index.html#question-2",
    "title": "An Statistical Mangrove Analysis Post",
    "section": "Question 2:",
    "text": "Question 2:\nLet analyze why the smaller plots are getting a larger estimate of total carbon per hectare.\nFor this purpose, we will create a new table and graph to easily visualize what the density per plot type (Number of trees per m2) looks like:\n\n\nShow code\n#Changing the column to numeric\nmangrove_df$plot_size_m2_num <- as.numeric(mangrove_df$plot_size_m2)\n\ndensity_df <- read_csv(\"/Users/javipatron/Documents/MEDS/Courses/eds222/homework/eds222-finalproject/data/clean_monitoring_data_javier.csv\") |> \n  clean_names() |> \n  filter(plantation_year == 2017) |> \n  select(height_cm,plot, plot_size_m2, cd_chatting_m,total_tree_kg_c,total_tree_mg_c_ha) |> \n  group_by(plot, plot_size_m2) |> \n  summarise(sample_count = n(),\n            mean_hight = mean(height_cm),\n            mean_tree_c = mean(total_tree_kg_c),\n            mean_carbon_mg_ha = mean(total_tree_mg_c_ha),\n            sd_tree_c = sd(total_tree_kg_c),\n            sd_tree_c_ha = sd(total_tree_mg_c_ha)) |> \n  mutate(density = sample_count/plot_size_m2)\n\nhead(density_df) %>% \n  kbl(align=rep('c', 5),\n      caption =\"Table 4. Density Table per Plot\",\n      position = \"left\") %>%\n  kable_paper(\"hover\", full_width = F)\n\n\n\n\nTable 4. Density Table per Plot\n \n  \n    plot \n    plot_size_m2 \n    sample_count \n    mean_hight \n    mean_tree_c \n    mean_carbon_mg_ha \n    sd_tree_c \n    sd_tree_c_ha \n    density \n  \n \n\n  \n    1_new \n    25.133 \n    95 \n    154.35789 \n    0.8619895 \n    0.3429368 \n    0.9612535 \n    0.3824683 \n    3.779891 \n  \n  \n    12 \n    153.938 \n    298 \n    96.80872 \n    0.3211477 \n    0.0208591 \n    0.2032983 \n    0.0132004 \n    1.935844 \n  \n  \n    13 \n    153.938 \n    183 \n    84.13115 \n    0.3955847 \n    0.0257268 \n    0.2680318 \n    0.0174041 \n    1.188790 \n  \n  \n    14 \n    153.938 \n    160 \n    108.31875 \n    0.5805625 \n    0.0377312 \n    0.3058017 \n    0.0198459 \n    1.039379 \n  \n  \n    16 \n    153.938 \n    288 \n    107.60069 \n    0.3394236 \n    0.0220590 \n    0.3061588 \n    0.0198987 \n    1.870883 \n  \n  \n    17 \n    153.938 \n    223 \n    105.67265 \n    0.3120404 \n    0.0202825 \n    0.2867950 \n    0.0186237 \n    1.448635 \n  \n\n\n\n\n\nShow code\ndensity_graph <- ggplot(density_df, aes(x= as.factor(plot_size_m2), y= density, fill = as.factor(plot_size_m2))) +\n  geom_boxplot(alpha = 0.7) +\n  labs(title = \"Density of trees per plot size\",\n       x= \"Plot Size (m2)\",\n       y = \"Density (Tree/m2)\",\n       col = \"Plot Size (m2)\") +\n  scale_fill_discrete(name = \"Plot Type\")\n\nggplotly(density_graph)\n\n\n\n\n\n\nAs we can see in this graph, the plot sizes significantly differ in density (Number of trees per m2). Plots of 25 m2 have a density of 3.2 trees per m2, and plots of 77 m2 have a density of 0.873 trees per m2. To avoid possible bias, this is a point to highlight for future projects.\nNow, to visually show the effect of plot sizes on the total carbon per tree, let us take a deeper look at these two histograms.\nThis Histogram shows how much variance we have between our plots.\n\n\nShow code\nggplot(plots_2017, aes(x=sd_tree_c_ha)) +\n  geom_histogram(aes(y = stat(density)), color = \"gray20\", fill = \"darkolivegreen\", alpha = 0.7) +\n  geom_density(col = \"gray30\", alpha = 0.15, fill = \"green\") +\n  labs(title = \"Total Carbon per Tree (Mg/ha)\",\n       subtitle = \"All Plots\",\n       x = \"Tree Carbon Variance (Mg/ha)\",\n       y = \"Denisity Plots\")\n\n\n\n\n\nWe have a skew right histogram with a long tail. Now let us analyze this same plot, but separating per plot type, to see who is responsible for those outliers.\n\n\nShow code\nhistogram_plot <- plots_2017 |> \n  filter(plot_size_m2 %in% c(25.133, 76.969, 153.938)) |> \nggplot(aes(x=sd_tree_c_ha)) +\n  geom_histogram(aes(y = stat(density), fill = plot_size_m2),color = \"gray30\", alpha = 0.3) +\n  geom_density(aes(fill = plot_size_m2), col = \"gray30\", alpha = 0.8) +\n  labs(title = \"Total Carbon per Tree (Mg/ha)\",\n       subtitle = \"Per Plot\",\n       x = \"Tree Carbon Variance (Mg/ha)\",\n       y = \"Density Plots\")\n\nggplotly(histogram_plot)\n\n\n\n\n\n\n\n\nShow code\n#Total Tree Carbon (mg/ha)\n# Just the 25m2\nmangrove_2017 |> \n  filter(plot_size_m2 == 25.133) |> \nggplot(aes(x=total_tree_mg_c_ha)) +\n  geom_histogram(aes(y = stat(density)), fill = \"red\", color = \"gray30\", alpha = 0.6) +\n  geom_density(col = \"gray30\", alpha = 0.3, fill = \"gray10\") +\n  labs(title = \"Total Carbon per Tree (Mg/ha)\",\n       subtitle = \"25m2\")\n\n\n\n\n\n\n\nShow code\n#Total Tree Carbon (mg/ha)\n# Just the 77m2\nmangrove_2017 |> \n  filter(plot_size_m2 == 76.969) |> \nggplot(aes(x=total_tree_mg_c_ha)) +\n  geom_histogram(aes(y = stat(density)), fill = \"lightgreen\", color = \"gray30\") +\n  geom_density(col = \"gray30\", alpha = 0.5, fill = \"gray10\") +\n  labs(title = \"Total Carbon per Tree (Mg/ha)\",\n       subtitle = \"77m2\")\n\n\n\n\n\n\n\nShow code\n#Total Tree Carbon (mg/ha)\n# Just the 154m2\nmangrove_2017 |> \n  filter(plot_size_m2 == 153.938) |> \nggplot(aes(x=total_tree_mg_c_ha)) +\n  geom_histogram(aes(y = stat(density)), fill = \"lightblue\", color = \"gray30\") +\n  geom_density(col = \"gray30\", alpha = 0.5, fill = \"gray10\") +\n  labs(title = \"Total Carbon per Tree (Mg/ha)\",\n       subtitle = \"154m2\")\n\n\n\n\n\n\nImportant take away from Question 2:\nThe 25m2 plots have the highest carbon per hectare, a higher density of trees per m2, and a higher variance in their calculations. Overall, the plot of 25m2 has a more considerable amount of carbon stock per hectare, however, with high variability, which is not very confident for the methodologies and the Verified Carbon Standard protocols.\nAn important take away to ask and further analyse with Silvestrum, is why the 25m2 samples are having the highest trees records and the highest tree density in comparison to the 77m2 and 154m2."
  },
  {
    "objectID": "posts/stats_final/index.html#question-3",
    "href": "posts/stats_final/index.html#question-3",
    "title": "An Statistical Mangrove Analysis Post",
    "section": "Question 3:",
    "text": "Question 3:\nAs we can see a significant effect of sample plot size in the calculated Total Carbon per Tree, it would be helpful to put our shoes in the field, and estimate an appropriate sample size to determine the amount of carbon storage in this same area.\nFirst, does a larger number of samples decrease the variance in our calculations?\n\n\nShow code\nvariance_graph <- ggplot(plots_2017, aes(x= sample_count, y = (sd_tree_c_ha^2))) +\n  geom_point(aes(color = plot_size_m2)) +\n  geom_smooth(method = lm,\n              color = \"cyan4\",\n              se = F) +\n  labs(title = \"Tree Carbon variance per Sample plot\",\n       x = \"Number of samples per Plot\",\n       y = \"Variance of Carbon in each plot\")\n\nggplotly(variance_graph)\n\n\n\n\n\n\nThis graph shows that a larger number of samples decrease the variance in our calculations. But is there a way we can define our “sweet spot” of sample sizes? In the case of the 154m2 the 3,466 did lower the variance, but it sounds like a lot of work!\nFurthermore, to correctly create a statistical approach, define an “ideal” sample count, and help guide sample sizes in future projects. We will use this data, and the pwr()` package to estimate the number of samples needed to obtain a high power of confidentiality. In other words, depending on the means overlaps for each plot size, we will need more or less samples to get the 95% confidence that we are looking for.\nFirst, we need to understand and visualize the overlaps that we currently have between our sample plots.\n\n\nShow code\n#Total Tree Carbon (mg/ha)\nhistogram_all <- mangrove_2017 |> \n  filter(plot_size_m2 %in% c(25.133, 76.969, 153.938)) |> \nggplot(aes(x=total_tree_mg_c_ha)) +\n  geom_histogram(aes(y = stat(density), fill = plot_size_m2),color = \"gray30\", alpha = 0.3) +\n  geom_density(aes(fill = plot_size_m2), col = \"gray30\", alpha = 0.8) +\n  labs(title = \"Histogram of Carbon per Tree (Mg/ha)\",\n       subtitle = \"2017\")\n\nggplotly(histogram_all)\n\n\n\n\n\n\nThe histogram above shows the density between all tree measurements per plot size. The important part is to see the overlap between the sample types to calculate the power.\nAnother way to visualize this distribution of a single continuous variable of total tree carbon (Mg/ha) is by dividing the plot sizes into bins and using the frequency polygons geom_freqpoly()` function to display the counts with lines. Frequency polygons are more suitable when you want to compare the distribution across the levels of a categorical variable.\n\n\nShow code\n#Plotting just the lines\nggplot(mangrove_2017, aes(x=total_tree_mg_c_ha, color = plot_size_m2)) +\n  geom_freqpoly(aes(y = stat(density))) +\n  labs(title = \"Frequency Polygon\",\n    subtitle = \"Invisible Histogram to see overlaps between Sample Size\",\n       x = \"Total Carbon per Tree (Mg/ha)\",\n       y = \"Density\")\n\n\n\n\n\nThanks to the Frequency polygon graph, we can see clearly the overlap between 77m2 and 154m2 plot types, which are way more correlated than the overlap with 25m2.\nThirdly, we will use the pwr.t.test function to estimate the number of counts we need from each sample plot to have a power of 90%.\n\n\nShow code\n# Create the objects with the sd of each group\nsd_25m = mangrove_plots_2017[[1,5]]\nsd_77m = mangrove_plots_2017[[2,5]]\nsd_154m =  mangrove_plots_2017[[3,5]]\nmean_25m = mangrove_plots_2017[[1,4]]\nmean_77m = mangrove_plots_2017[[2,4]]\nmean_154m = mangrove_plots_2017[[3,4]]\n\n\n\nA) Power between 25m2 and 154m2.\n\n\nShow code\nmean_difference_a = mean_25m - mean_154m\nd25_154 = as.numeric(sqrt(sd_25m^2/2 + sd_154m^2/2))\n\neffect_size_a = mean_difference_a / d25_154\n\npower_test_1 <- pwr.t.test(d = round(effect_size_a,2), \n                           power = 0.95, \n                           sig.level = 0.05,\n                           type=\"two.sample\",\n                           alternative=\"two.sided\")\nprint(power_test_1)\n\n\n\n     Two-sample t test power calculation \n\n              n = 11.46789\n              d = 1.58\n      sig.level = 0.05\n          power = 0.95\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n\n\nBecause the means between 25m2 and 154m2 are so different, we will only need twelve samples to have a power of 95%.\n\n\nB) Power between 77m2 and 154m2\n\n\nShow code\nmean_difference_b = mean_77m - mean_154m\nd77_154 = as.numeric(sqrt(sd_77m^2/2 + sd_154m^2/2))\neffect_size_b = mean_difference_b / d77_154\n\n\npower_test_2 <- pwr.t.test(d = round(effect_size_b,2), \n                           power = 0.95, \n                           sig.level = 0.05,\n                           type=\"two.sample\",\n                           alternative=\"two.sided\")\nprint(power_test_2)\n\n\n\n     Two-sample t test power calculation \n\n              n = 60.64108\n              d = 0.66\n      sig.level = 0.05\n          power = 0.95\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n\n\nShow code\nplot(power_test_2)\n\n\n\n\n\nIn this case, as the means between 77m2 and 154m2 are closer together, we can estimate that with Sixty samples, we could have a power of 95%."
  },
  {
    "objectID": "posts/stats_final/index.html#conclusion",
    "href": "posts/stats_final/index.html#conclusion",
    "title": "An Statistical Mangrove Analysis Post",
    "section": "Conclusion",
    "text": "Conclusion\nFurther research needs to be conducted with other mangrove reforestation sites to increase our confidentiality regarding the correct selection of plot sizes and tree measurements.\nIn order to increase our probabilities and reduce possible bias for future projects, its important to follow the VCS methodologies regarding uncertainty. A random stratified sampling could be a better approach than measuring every single tree in the reforestation. Nevertheless, this study supports the efforts put in place with the 77m2 and 154m2 sample plots as they show a general low variance in their calculations, and a significant lower amount of total measurement specially for the 77m2 plot, saving valuable time in the field. Assuming that all calculation are right in the initial provided data, this study successfully supports the initial question of what is an “ideal” number of samples to reduce extra effort, and still be certain of your estimates (see results of Question 3).  \nOverall, Mangrove forests are an incredible biological ecosystem; this type of small analysis and efforts definitely help the nature-based solutions get closer to unimaginable changes in future projects. As this analysis has proved there are some questions being answered, but there are still some other important opportunities to be discovered regarding the structure of sampling according to the methodologies, which they seem to be the key factor for certain results.\nPS. Thanks Silvestrum Climate Associates for sharing this collection of data samples data from one of your real reforestation sites!"
  },
  {
    "objectID": "posts/stats_final/index.html#references",
    "href": "posts/stats_final/index.html#references",
    "title": "An Statistical Mangrove Analysis Post",
    "section": "References",
    "text": "References\n\nVerraadmin (2020) First Blue Carbon Conservation Methodology expected to scale up finance for Coastal Restoration & Conservation Activities, Verra. Available at: https://verra.org/first-blue-carbon-conservation-methodology-expected-to-scale-up-finance-for-coastal-restoration-conservation-activities (Accessed: December 8, 2022). \nVM0033 methodology for tidal wetland and Seagrass Restoration, v2.0 (2022) Verra. Available at: https://verra.org/methodologies/vm0033-methodology-for-tidal-wetland-and-seagrass-restoration-v2-0/ (Accessed: December 8, 2022). \nVM0032 methodology for the adoption of sustainable grasslands through adjustment of fire and grazing, v1.0 (2022) Verra. Available at: https://verra.org/methodologies/vm0032-methodology-for-the-adoption-of-sustainable-grasslands-through-adjustment-of-fire-and-grazing-v1-0/ (Accessed: December 8, 2022). \nMcGuinness, K. (2005) Above- and below-ground biomass, and allometry, of four common northern ..., Research Gate. Available at: https://www.researchgate.net/publication/248899546_Above-_and_below-ground_biomass_and_allometry_of_four_common_northern_Australian_mangroves (Accessed: December 9, 2022).\nKauffman, and Donato, (2012) Center for International Forestry Research - CIFOR, Cifor. Available at: https://www.cifor.org/publications/pdf_files/WPapers/WP86CIFOR.pdf (Accessed: December 9, 2022).\nCenter for International Forestry Research - CIFOR (no date). Available at: https://www.cifor.org/publications/pdf_files/WPapers/WP86CIFOR.pdf (Accessed: December 9, 2022).\nThe more you know: Mangroves (2020) Ripley’s Aquarium of Canada. Available at: https://www.ripleyaquariums.com/canada/the-more-you-know-mangroves/ (Accessed: December 8, 2022).\n\n\nSupporting Figures\n\nTest the power results with random samples\nHere, we have created a power table with the means and SD of your random table and run a power analysis with the selected random samples to test my results\nTest your results 25m2 vs 154m2 by changing the number of samples!\n\n\nShow code\nsamples = 12\nrandom_table_test <- mangrove_2017 |> \n  group_by(plot_size_m2) |> \n  slice_sample(n = samples)\n\npower_table_test <- random_table_test |> \n  group_by(plot_size_m2) |> \n  summarise(tot_samples = n(),\n            tot_plot_count = length(unique(plot)),\n            mean_tree_c_ha_mg = mean(total_tree_mg_c_ha),\n            sd_tree_c_ha_mg = sd(total_tree_mg_c_ha)) |> \n  mutate(plot_size_m2 = c(\"25m2\", \"77m2\", \"154m2\"))\n\nrandom_mean_25m = power_table_test[[1,4]]\nrandom_mean_154m = power_table_test[[3,4]]\nrandom_sd_25m = power_table_test[[1,5]]\nrandom_sd_154m = power_table_test[[3,5]]\n\n#Using all the samples\n#Real Difference \nrandom_effect_size_a = (random_mean_25m - random_mean_154m) / (as.numeric(sqrt(random_sd_25m^2/2 + random_sd_154m^2/2)))\n\n\nrandom_power_test <- pwr.t.test(d = random_effect_size_a, \n                           n = samples, \n                           sig.level = 0.05,\n                           type=\"two.sample\",\n                           alternative=\"two.sided\")\n\nprint(effect_size_a)\n\n\n[1] 1.584427\n\n\nShow code\nprint(random_effect_size_a)\n\n\n[1] 1.966982\n\n\nShow code\nggplot(random_table_test, aes(x= plot_size_m2, y = total_tree_mg_c_ha, col = plot_size_m2)) +\n  geom_point() +\n  geom_hline(aes(yintercept = mean_difference_a, \n                 linetype = \"real\"), \n             color = \"gray50\", \n             size = .5) +\n  geom_hline(aes(yintercept = (random_mean_25m - random_mean_154m), \n                 linetype = \"random\"), \n             color = \"gray10\", \n             size = .5) +\n  scale_shape_manual(\"\", values= c(\"mean\" = \"+\")) +\n  scale_linetype_manual(name = \"Means difference\", \n                        values = c(2, 2), \n                        guide = guide_legend(\n                          override.aes = list(\n                            color = c(\"gray50\", \"gray10\")))) +\n  labs(title = \"Total Carbon per Tree (Mg/ha)\",\n       subtitle = \"Random sample size\",\n       x = \"Plot Type\",\n       y = \"Total Tree Carbon (mg/ha)\",\n       caption = paste(\"Difference between the real sample means is:\",round(mean_difference_a,2),\"(Mg/ha)\" ,\"\\nDifference between the randomly relected samples mean is:\", round((random_mean_25m - random_mean_154m),2), \"(Mg/ha)\", \"\\nPower:\", round(random_power_test$power,2)))\n\n\n\n\n\nTest your results 77m2 vs 154m2 with 50 samples\n\n\nShow code\nsamples = 60\nrandom_table_test <- mangrove_2017 |> \n  group_by(plot_size_m2) |> \n  slice_sample(n = samples)\n\npower_table_test <- random_table_test |> \n  group_by(plot_size_m2) |> \n  summarise(tot_samples = n(),\n            tot_plot_count = length(unique(plot)),\n            mean_tree_c_ha_mg = mean(total_tree_mg_c_ha),\n            sd_tree_c_ha_mg = sd(total_tree_mg_c_ha)) |> \n  mutate(plot_size_m2 = c(\"25m2\", \"77m2\", \"154m2\"))\n\nrandom_mean_77m = power_table_test[[2,4]]\nrandom_mean_154m = power_table_test[[3,4]]\nrandom_sd_77m = power_table_test[[2,5]]\nrandom_sd_154m = power_table_test[[3,5]]\n\n#Using all the samples\n#Real Difference \nrandom_effect_size_b = (random_mean_77m - random_mean_154m) / (as.numeric(sqrt(random_sd_77m^2/2 + random_sd_154m^2/2)))\n\nrandom_power_test_b <- pwr.t.test(d = random_effect_size_b, \n                           n = samples, \n                           sig.level = 0.05,\n                           type=\"two.sample\",\n                           alternative=\"two.sided\")\n\n\nprint(effect_size_b)\n\n\n[1] 0.6571471\n\n\nShow code\nprint(random_effect_size_b)\n\n\n[1] 0.4531036\n\n\nShow code\nggplot(random_table_test, aes(x= plot_size_m2, y = total_tree_mg_c_ha, col = plot_size_m2)) +\n  geom_point() +\n  geom_hline(aes(yintercept = effect_size_b, \n                 linetype = \"real\"), \n             color = \"gray50\", \n             size = .5) +\n  geom_hline(aes(yintercept = random_effect_size_b, \n                 linetype = \"random\"), \n             color = \"gray10\", \n             size = .5) +\n  scale_shape_manual(\"\", values= c(\"mean\" = \"+\")) +\n  scale_linetype_manual(name = \"Means Difference\", \n                        values = c(2, 2), \n                        guide = guide_legend(\n                          override.aes = list(\n                            color = c(\"gray50\", \"gray10\")))) +\n  labs(title = \"Total Carbon per Tree (Mg/ha)\",\n       subtitle = \"Random sample size\",\n       x = \"Plot Type\",\n       y = \"Total Tree Carbon (mg/ha)\",\n       caption = paste(\"Difference between the real sample means is:\",round(mean_difference_b,2),\"(Mg/ha)\" ,\"\\nDifference between the randomly relected samples mean is:\", round((random_mean_77m - random_mean_154m),2), \"(Mg/ha)\",\"\\nPower:\", round(random_power_test_b$power,2)))\n\n\n\n\n\n\n\nC) Power of just 154m2\n\n\nShow code\nd_154 = as.numeric(sqrt(sd_154m^2/2))\neffect_size_c = mean_154m / d77_154\n\n\npower_test_c <- pwr.t.test(d = round(effect_size_c,2), \n                           power = 0.95, \n                           sig.level = 0.05,\n                           type=\"two.sample\",\n                           alternative=\"two.sided\")\nprint(power_test_c)\n\n\n\n     Two-sample t test power calculation \n\n              n = 78.23115\n              d = 0.58\n      sig.level = 0.05\n          power = 0.95\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n\n\nShow code\nplot(power_test_c)\n\n\n\n\n\n\n\nD) Power of just 77m2\n\n\nShow code\nd_77 = as.numeric(sqrt(sd_77m^2/2))\neffect_size_d = mean_77m / d_77\n\n\npower_test_d <- pwr.t.test(d = round(effect_size_d,2), \n                           power = 0.95, \n                           sig.level = 0.05,\n                           type=\"two.sample\",\n                           alternative=\"two.sided\")\nprint(power_test_d)\n\n\n\n     Two-sample t test power calculation \n\n              n = 15.08404\n              d = 1.36\n      sig.level = 0.05\n          power = 0.95\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n\n\n\n\nE) Power of just 25m2\n\n\nShow code\nd_25 = as.numeric(sqrt(sd_25m^2/2))\neffect_size_e = mean_25m / d_25\n\n\npower_test_e <- pwr.t.test(d = round(effect_size_e,2), \n                           power = 0.95, \n                           sig.level = 0.05,\n                           type=\"two.sample\",\n                           alternative=\"two.sided\")\nprint(power_test_e)\n\n\n\n     Two-sample t test power calculation \n\n              n = 9.759221\n              d = 1.73\n      sig.level = 0.05\n          power = 0.95\n    alternative = two.sided\n\nNOTE: n is number in *each* group"
  },
  {
    "objectID": "posts/eez_spatial/index.html",
    "href": "posts/eez_spatial/index.html",
    "title": "Marine Aquaculture",
    "section": "",
    "text": "Marine aquaculture has the potential to play an important role in the global food supply as a more sustainable protein option than land-based meat production.1 Gentry et al. mapped the potential for marine aquaculture globally based on multiple constraints, including ship traffic, dissolved oxygen, bottom depth .2\nFor this assignment, you are tasked with determining which Exclusive Economic Zones (EEZ) on the West Coast of the US are best suited to developing marine aquaculture for several species of oysters.\nBased on previous research, we know that oysters needs the following conditions for optimal growth:\n\nSea surface temperature: 11-30 °C\nDepth: 0-70 meters below sea level\n\n\n\n\nCombining vector/raster data\nResampling raster data\nMasking raster data\nMap algebra"
  },
  {
    "objectID": "posts/eez_spatial/index.html#data",
    "href": "posts/eez_spatial/index.html#data",
    "title": "Marine Aquaculture",
    "section": "Data",
    "text": "Data\n\nSea Surface Temperature\nWe will use average annual sea surface temperature (SST) from the years 2008 to 2012 to characterize the average sea surface temperature within the region. The data we are working with was originally generated from NOAA’s 5km Daily Global Satellite Sea Surface Temperature Anomaly v3.1.\n\n\nBathymetry\nTo characterize the depth of the ocean we will use the General Bathymetric Chart of the Oceans (GEBCO).3\n\n\nExclusive Economic Zones\nWe will be designating maritime boundaries using Exclusive Economic Zones off of the west coast of US from Marineregions.org.\n\n\nPrepare data\nTo start, we need to load all necessary data and make sure it has the coordinate reference system.\n\nLoad necessary packages and set path\n\nI recommend using the here package\n\nRead in the shape file for the West Coast EEZ (wc_regions_clean.shp)\nRead in SST rasters\n\naverage_annual_sst_2008.tif\naverage_annual_sst_2009.tif\naverage_annual_sst_2010.tif\naverage_annual_sst_2011.tif\naverage_annual_sst_2012.tif\n\nCombine SST rasters into a raster stack\nRead in bathymetry raster (depth.tif)\nCheck that data are in the same coordinate reference system\n\nReproject any data not in the same projection\n\n\n\n\n\nShow code\n# Setting my filepaths\nrootdir <- (\"/Users/javipatron/Documents/MEDS/Courses/eds223\")\ndata <- file.path(rootdir,\"data\",\"assignment4\")\n\n# Creating the names for each file\nsst_2008 <- 'average_annual_sst_2008.tif' \nsst_2009 <- \"average_annual_sst_2009.tif\"\nsst_2010 <- \"average_annual_sst_2010.tif\"\nsst_2011 <- \"average_annual_sst_2011.tif\"\nsst_2012 <- \"average_annual_sst_2012.tif\"\ndepth <- \"depth.tif\"\n  \n# Downloading the raster data to a star object\nsst_2008 <- rast(file.path(data, sst_2008))\nsst_2009 <- rast(file.path(data, sst_2009))\nsst_2010 <- rast(file.path(data, sst_2010))\nsst_2011 <- rast(file.path(data, sst_2011))\nsst_2012 <- rast(file.path(data, sst_2012))\nwc_regions <- st_read(file.path(data, \"wc_regions_clean.shp\"))\n\n\nReading layer `wc_regions_clean' from data source \n  `/Users/javipatron/Documents/MEDS/Courses/eds223/data/assignment4/wc_regions_clean.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 5 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -129.1635 ymin: 30.542 xmax: -117.097 ymax: 49.00031\nGeodetic CRS:  WGS 84\n\n\nShow code\ndepth <- rast(file.path(data,depth))\n\n# Stack all the raster\nall_sst <- c(sst_2008, sst_2009, sst_2010, sst_2011, sst_2012)\n\n\n# Check coordinate reference system\n#st_crs(wc_regions)\n#st_crs(depth)\n#st_crs(all_sst)\n\n\n# Set the new CRS\nall_sst <- project(all_sst, \"EPSG:4326\")\nall_sst\n\n\nclass       : SpatRaster \ndimensions  : 480, 408, 5  (nrow, ncol, nlyr)\nresolution  : 0.04165905, 0.04165905  (x, y)\nextent      : -131.9848, -114.9879, 29.99208, 49.98842  (xmin, xmax, ymin, ymax)\ncoord. ref. : lon/lat WGS 84 (EPSG:4326) \nsource      : memory \nnames       : averag~t_2008, averag~t_2009, averag~t_2010, averag~t_2011, averag~t_2012 \nmin values  :      278.8167,      278.0800,      279.9200,      278.8600,      278.1920 \nmax values  :      301.4321,      301.4475,      300.9486,      307.2733,      309.8502 \n\n\nPrint the West Cost Polygon Vector data to see how it looks like:\n\n\nShow code\ntm_shape(wc_regions) +\n  tm_polygons(col=\"rgn\",\n              palette= \"RdYlBu\",\n              legend.reverse = T,\n              title = \"EEZ West Coast Regions\") +\n  tm_graticules(alpha = 0.3) +\n  tm_compass()\n\n\nSome legend labels were too wide. These labels have been resized to 0.44, 0.45, 0.49. Increase legend.width (argument of tm_layout) to make the legend wider and therefore the labels larger.\n\n\n\n\n\nShow code\ntmap_mode(\"view\")\n\n\ntmap mode set to interactive viewing"
  },
  {
    "objectID": "posts/eez_spatial/index.html#process-data",
    "href": "posts/eez_spatial/index.html#process-data",
    "title": "Marine Aquaculture",
    "section": "Process Data",
    "text": "Process Data\nNext, we need process the SST and depth data so that they can be combined. In this case the SST and depth data have slightly different resolutions, extents, and positions. We don’t want to change the underlying depth data, so we will need to resample to match the SST data using the nearest neighbor approach.\n\nFind the mean SST from 2008-2012\nConvert SST data from Kelvin to Celsius\nCrop depth raster to match the extent of the SST raster\n\nnote: the resolutions of the SST and depth data do not match\n\nResample the depth data to match the resolution of the SST data using the nearest neighbor approach.\nCheck that the depth and SST match in resolution, extent, and coordinate reference system. Can the rasters be stacked?\n\n\n\nShow code\n#Finding the mean \nmean_sst <- terra::app(all_sst, mean)\n\n#Converting to Celsius\nmean_sst_c <- (mean_sst - 273.15)\n\n#Cropping the Depth to just the area of SST\ncrop_depth <- crop(depth, mean_sst)\n\nclass(crop_depth)\n\n\n[1] \"SpatRaster\"\nattr(,\"package\")\n[1] \"terra\"\n\n\nShow code\n# Re-sample the depth with the needed resolution\nnew_depth <- terra::resample(crop_depth, mean_sst_c, method = \"near\")\n\n# Stack both rasters and see if they match\nstack_depth_sst <- c(mean_sst_c, new_depth)\n\n\n\nFind suitable locations\nIn order to find suitable locations for marine aquaculture, we’ll need to find locations that are suitable in terms of both SST and depth.\n\nReclassify SST and depth data into locations that are suitable for Lump sucker fish\n\nhint: set suitable values to 1 and unsuitable values to NA\n\nFind locations that satisfy both SST and depth conditions\n\nhint: create an overlay using the lapp() function multiplying cell values\n\n\n\n\n\nShow code\n#Create the matrix for Temperature between 11°C and 30°C\ntemp_vector <- c(-Inf, 11, NA, \n                   11, 30, 1,\n                   30, Inf, NA)\n\ntemp_oysters_matrix <- matrix(temp_vector, ncol= 3, byrow = T)\n\n# Reclassify the SST raster of °C\ntemp_oysters <- classify(mean_sst_c, temp_oysters_matrix)\n\n\n#Create the matrix for Depth between 0 & -70\ndepth_vector <- c(-Inf, -70, NA, \n                   -70, 0, 1,\n                   0, Inf, NA)\n\ndepth_oysters_matrix <- matrix(depth_vector, ncol= 3, byrow = T)\n\n# Reclassify the SST raster of depth\ndepth_oysters <- classify(new_depth, depth_oysters_matrix, include.lowest = T)\n\n# Combine the two raster\nmatrixes <- c(depth_oysters, temp_oysters)\n\n# Rename the matrixes attributes\nnames(matrixes) <- c(\"temp_matx\",\"depth_matx\")\n\n#Combine both matrixes\ncombined_matrix_stack <- c(matrixes, stack_depth_sst)\n\n\n\n\nShow code\n#Find the locations where the oysters have a 1 in the pixel.\ncheck_condition <- function(x,y){\n  return(x * y)\n   }\n\ntemp_conditions <- lapp(combined_matrix_stack[[c(1,3)]], fun = check_condition)\ndepth_conditions <- lapp(combined_matrix_stack[[c(2,4)]], fun = check_condition)\n\ntm_shape(temp_conditions) +\n  tm_raster(title = \"Sea Temp °C\") +\n  tm_graticules(alpha = 0.3) +\n  tm_compass(position = c(\"right\", \"top\")) +\n  tm_layout(legend.outside = TRUE,\n            frame = T)\n\n\nCompass not supported in view mode.\n\n\n\n\n\n\nShow code\ntm_shape(depth_conditions) +\n  tm_raster(title = \"Depth (Meters)\") +\n  tm_graticules(alpha = 0.3) +\n  tm_compass(position = c(\"right\", \"top\")) +\n  tm_layout(legend.outside = TRUE,\n            frame = T)\n\n\nCompass not supported in view mode.\n\n\nVariable(s) \"NA\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n\nNow lets create the mask of both conditions\n\n\nShow code\nsuitable_conditions <- lapp(matrixes[[c(1,2)]], fun = check_condition)\nprint(suitable_conditions)\n\n\nclass       : SpatRaster \ndimensions  : 480, 408, 1  (nrow, ncol, nlyr)\nresolution  : 0.04165905, 0.04165905  (x, y)\nextent      : -131.9848, -114.9879, 29.99208, 49.98842  (xmin, xmax, ymin, ymax)\ncoord. ref. : lon/lat WGS 84 (EPSG:4326) \nsource      : memory \nname        : lyr1 \nmin value   :    1 \nmax value   :    1"
  },
  {
    "objectID": "posts/eez_spatial/index.html#determine-the-most-suitable-eez",
    "href": "posts/eez_spatial/index.html#determine-the-most-suitable-eez",
    "title": "Marine Aquaculture",
    "section": "Determine the most suitable EEZ",
    "text": "Determine the most suitable EEZ\nWe want to determine the total suitable area within each EEZ in order to rank zones by priority. To do so, we need to find the total area of suitable locations within each EEZ.\n\nSelect suitable cells within West Coast EEZs\nFind area of grid cells\nFind the total suitable area within each EEZ\n\nhint: it might be helpful to rasterize the EEZ data\n\nFind the percentage of each zone that is suitable\n\nhint it might be helpful to join the suitable area by region onto the EEZ vector data\n\n\n\n\nShow code\ncell_ezz <- cellSize(suitable_conditions, unit = 'km', transform = TRUE)\n\nrast_ezz <- rasterize(wc_regions, suitable_conditions, field= 'rgn')\nmask_ezz <-  mask(rast_ezz, suitable_conditions)\nsuitable_area <- zonal(cell_ezz, mask_ezz, sum )\n\njoined_area <-  left_join(wc_regions, suitable_area, by = 'rgn') |> \n  mutate(area_suitkm2 = area,\n         percentage = (area_suitkm2 / area_km2) * 100,\n         .before = geometry)"
  },
  {
    "objectID": "posts/eez_spatial/index.html#visualize-results",
    "href": "posts/eez_spatial/index.html#visualize-results",
    "title": "Marine Aquaculture",
    "section": "Visualize results",
    "text": "Visualize results\nNow that we have results, we need to present them!\nCreate the following maps:\n\nTotal suitable area by region\nPercent suitable area by region\n\n\n\nShow code\ntm_shape(joined_area) +\n  tm_polygons(col = \"area\", palette = \"RdYlBu\", legend.reverse = T, title = \"Area (km2)\") +\n  tm_shape(wc_regions) +\n  tm_polygons(alpha = 0.5) +\n  tm_layout(legend.outside = TRUE,\n            main.title.size = 1,\n            main.title = paste(\"Total Suitable area per EEZ for: Oysters\"),\n            frame = T)\n\n\n\n\n\n\n\n\n\nShow code\ntm_shape(joined_area) +\n  tm_polygons(col = \"percentage\", palette = \"RdYlBu\", legend.reverse = T,\n              title = \"Percent (%)\") +\n  tm_shape(wc_regions) +\n  tm_polygons(alpha = 0.5) +\n  tm_layout(legend.outside = TRUE,\n            main.title.size = 1,\n            main.title = paste(\"Suitable Area per EEZ for: Oysters \"),\n            frame = T)"
  },
  {
    "objectID": "posts/eez_spatial/index.html#conclusion",
    "href": "posts/eez_spatial/index.html#conclusion",
    "title": "Marine Aquaculture",
    "section": "Conclusion",
    "text": "Conclusion\nAs you can see in the maps above the most suitable areas for the oysters are the northerner regions with a 3 to 3.5 % of the entire EEZ region. As the assignments states the sea surface temperature that the oysters like are between the 11-30 °C, and for the depth is between 0-70 meters below sea level, which are pretty specific. Thus, this results can give us hints on how the Economic Exclusive Zones help those species, and we can compare to other EEZ or other species of the US West Coast."
  },
  {
    "objectID": "posts/eez_spatial/index.html#broaden-your-workflow",
    "href": "posts/eez_spatial/index.html#broaden-your-workflow",
    "title": "Marine Aquaculture",
    "section": "Broaden your workflow!",
    "text": "Broaden your workflow!\nNow that you’ve worked through the solution for one group of species, let’s update your workflow to work for other species. Please create a function that would allow you to reproduce your results for other species. Your function should be able to do the following:\n\n\nAccept temperature and depth ranges and species name as inputs\n\nCreate maps of total suitable area and percent suitable area per EEZ with the species name in the title\n\n\nRun your function for a species of your choice! You can find information on species depth and temperature requirements on SeaLifeBase. Remember, we are thinking about the potential for marine aquaculture, so these species should have some reasonable potential for commercial consumption.\n\n\nShow code\nfind_my_happy_place <- function(species = \"NAME\", min_temp = 5, max_temp = 30, min_depth = 0, max_depth = -5468) {\n  temp_vector <- c(-Inf, min_temp, NA, min_temp, max_temp, 1,max_temp, Inf, NA)\n  temp_matrix <- matrix(temp_vector, ncol= 3, byrow = T)\n  temp_condition <- classify(mean_sst_c, temp_matrix)\n  depth_vector <- c(-Inf, max_depth, NA, max_depth, min_depth, 1, min_depth, Inf, NA)\n  depth_matrix <- matrix(depth_vector, ncol= 3, byrow = T)\n  depth_condition <- classify(new_depth, depth_matrix, include.lowest = T)\n  mix_rasters <- c(depth_condition, temp_condition)\n  suitable_conditions <- lapp(mix_rasters[[c(1,2)]], fun = check_condition)\n  cell_ezz <- cellSize(suitable_conditions, unit = 'km', transform = TRUE)\n  rast_ezz <- rasterize(wc_regions, suitable_conditions, field= 'rgn')\n  mask_ezz <-  mask(rast_ezz, suitable_conditions)\n  suitable_area <- zonal(cell_ezz, mask_ezz, sum )\n  joined_area <-  left_join(wc_regions, suitable_area, by = 'rgn') |>\n    mutate(happy_area_km2 = area,\n           \"happy_(%)\" = (happy_area_km2 / area_km2) * 100,\n           .before = geometry) |> \n    arrange(desc(happy_area_km2))\n  map <- tmap_arrange(tm_shape(joined_area) +\n                        tm_polygons(col = \"area\", palette = \"RdYlBu\", legend.reverse = T, title = \"Area (km2)\") +\n                        tm_shape(wc_regions) +\n                        tm_polygons(alpha = 0.5) +\n                        tm_layout(legend.outside = TRUE,\n                                  main.title = paste(\"Total Suitable area per EEZ for:\", species),\n                                  main.title.size = 1,\n                                  frame = T),\n                        tm_shape(joined_area) +\n                        tm_polygons(col = \"happy_(%)\", palette = \"RdYlBu\", legend.reverse = T,\n                                    title = \"Percent (%)\") +\n                        tm_shape(wc_regions) +\n                        tm_polygons(alpha = 0.5) +\n                        tm_layout(legend.outside = TRUE,\n                                  main.title = paste(\"Suitable Area per EEZ for:\", species),\n                                  main.title.size = 1,\n                                  frame = T))\n  print(joined_area[c(\"rgn\", \"rgn_key\", \"area_km2\", \"happy_area_km2\", \"happy_(%)\",\"geometry\")])\n  print(paste(\"*Conclusion:* For the species\", species, \"the most suitable region is\", joined_area$rgn[1], \"with\", round(joined_area$happy_area_km2[1],2), \"km2 of 'happy' area.\"))\n  \n  map\n}\n\n\n\nNow Test your function\nREMEMBER:\n1. The species name has to be in quotes. The Default value is “NAME”.\n2. The depth has to include the negative sign for the maximum depth.\nDefault; Min: 0, Max: -5468.\n3. The Temperature is in °C .\nDefault; Min: 5, Max: 30).\n\n\nShow code\nfind_my_happy_place()\n\n\nSimple feature collection with 5 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -129.1635 ymin: 30.542 xmax: -117.097 ymax: 49.00031\nGeodetic CRS:  WGS 84\n                  rgn rgn_key  area_km2 happy_area_km2 happy_(%)\n1 Southern California    CA-S 206860.78      205730.95  99.45382\n2  Central California    CA-C 202738.33      201478.95  99.37882\n3              Oregon      OR 179994.06      178650.46  99.25353\n4 Northern California    CA-N 164378.81      162975.61  99.14636\n5          Washington      WA  66898.31       64695.95  96.70790\n                        geometry\n1 MULTIPOLYGON (((-120.6505 3...\n2 MULTIPOLYGON (((-122.9928 3...\n3 MULTIPOLYGON (((-123.4318 4...\n4 MULTIPOLYGON (((-124.2102 4...\n5 MULTIPOLYGON (((-122.7675 4...\n[1] \"*Conclusion:* For the species NAME the most suitable region is Southern California with 205730.95 km2 of 'happy' area.\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nShow code\n# Try your species!! \nfind_my_happy_place(\"Turtle\", 13, 28, 0, -290)\n\n\nSimple feature collection with 5 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -129.1635 ymin: 30.542 xmax: -117.097 ymax: 49.00031\nGeodetic CRS:  WGS 84\n                  rgn rgn_key  area_km2 happy_area_km2  happy_(%)\n1 Southern California    CA-S 206860.78     10890.3024 5.26455645\n2  Central California    CA-C 202738.33       360.9648 0.17804468\n3          Washington      WA  66898.31        29.1610 0.04359004\n4              Oregon      OR 179994.06             NA         NA\n5 Northern California    CA-N 164378.81             NA         NA\n                        geometry\n1 MULTIPOLYGON (((-120.6505 3...\n2 MULTIPOLYGON (((-122.9928 3...\n3 MULTIPOLYGON (((-122.7675 4...\n4 MULTIPOLYGON (((-123.4318 4...\n5 MULTIPOLYGON (((-124.2102 4...\n[1] \"*Conclusion:* For the species Turtle the most suitable region is Southern California with 10890.3 km2 of 'happy' area.\""
  },
  {
    "objectID": "posts/blog_example_1/index.html",
    "href": "posts/blog_example_1/index.html",
    "title": "Blog Post Title",
    "section": "",
    "text": "SHARK\n\n\n\n\n\nIn this page will also help me visualize my references, cites, changes, and edits to official posts in my webpage.\nHere is some more text. Cite: (Csik 2022)\nWhen you want to reference stuff. Then in this same pager click in “Insert v”, then click in citation… then copy and paste the url\n\n\n\n\nReferences\n\nCsik, Samantha. 2022. “Adding a Blog to Your Existing Quarto Website.” October 24, 2022. https://samanthacsik.github.io/posts/2022-10-24-quarto-blogs/.\n\nCitationBibTeX citation:@online{patrón2022,\n  author = {Javier Patrón},\n  title = {Blog {Post} {Title}},\n  date = {2022-10-24},\n  url = {https://javipatron.github.io/posts/blog_example_1/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nJavier Patrón. 2022. “Blog Post Title.” October 24, 2022.\nhttps://javipatron.github.io/posts/blog_example_1/."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Javier Patrón",
    "section": "",
    "text": "Environmental Engineer"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "1 + 1\n\n[1] 2"
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Blogs",
    "section": "",
    "text": "MEDS\n\n\nSpatial\n\n\nOcean\n\n\nR\n\n\n\nDetermining which Exclusive Economic Zones (EEZ) on the US West Coast are best suited to developing marine aquaculture for ocean species like Oysters.\n\n\n\nJavier Patrón\n\n\nDec 16, 2022\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMEDS\n\n\nStatistics\n\n\nR\n\n\nMangroves\n\n\n\nA blue carbon analysis based on the skills learned from the course of Statistics for Environmental Data Science at the Bren School of Environmental Science & Management\n\n\n\nJavier Patrón\n\n\nDec 9, 2022\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMEDS\n\n\nR\n\n\nPython\n\n\nOcean\n\n\n\nWhat my first post looks like\n\n\n\nJavier Patrón\n\n\nOct 24, 2022\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "bio.html",
    "href": "bio.html",
    "title": "BIO",
    "section": "",
    "text": "Then in 2021, I shifted my career to become the team headman and navigator of a racing sailboat to cross the Pacific. During this time, I volunteered in a coral restoration project in Fiji, where the collection of data was proven to be key for effective restoration practices. This ocean crossing adventure was a life-changing experience and fueled my enthusiasm to apply for the Masters of Environmental Data Science at the Bren School UCSB.\nI´m an energetic and proactive individual. My vision as an Environmental Data Scientist is to empower high-end technology companies by improving their monitoring practices on data collection and drawing actionable insights to foster a positive environmental impact. Ultimately, I aspire to work on natural climate solutions, carbon offset, and MPA restoration and conservation.\n\n\n\nImage: Coral Farming. Mamanuca Islands, Fiji"
  }
]